<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>jquery实现多级树形分类可折叠菜单特效代码</title><!--图标样式--><link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" /><!--主要样式--><link rel="stylesheet" type="text/css" href="css/style.css" /><script type="text/javascript" src="js/jquery-1.7.2.min.js"></script></head><body><div class="tree well" id="ul_div"><ul>	<li class="parent_li">		<span id="1000001" title="Expand this branch" onclick="ajax_data(this)"><i class="icon-plus-sign"></i>1000001</span>	</li></ul></div><script type="application/javascript">    var arr=[];    function ajax_data(o) {        var url="http://192.168.0.152:804/api/index.php?act=area&op=test";        var init_val=$(o).attr("id");        if(contains(arr,init_val)){            var children = $(o).parent('li.parent_li').find(' > ul > li');            if (children.is(":visible")) {                children.hide('fast');                $(o).attr('title', 'Expand this branch').find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign');            }else {                children.show('fast');                $(o).attr('title', 'Collapse this branch').find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign');            }        }else{            var children = $(o).parent('li.parent_li').find(' > ul > li');            if (children.is(":visible")) {                children.hide('fast');                $(o).attr('title', 'Expand this branch').find(' > i').addClass('icon-plus-sign').removeClass('icon-minus-sign');            }else {                children.show('fast');                $(o).attr('title', 'Collapse this branch').find(' > i').addClass('icon-minus-sign').removeClass('icon-plus-sign');            }            var bb=Math.ceil(Math.random()*100);            var aa=parseInt(init_val)+bb;            $.getJSON(url, {'member_id': init_val}, function(json){                if(json.length==0){                    alert("下面没有接点人了");                }else{                    $("#"+init_val).after("<ul id='"+aa+"'></ul>");                    for (var i=0;i<json.length;i++){                        $("#"+aa).append("<li class='parent_li'><span title='Collapse this branch' onclick='ajax_data(this)' id='"+json[i].me_member_id+"'><i class='icon-plus-sign'></i>"+json[i].me_member_id+"</span></li>");                    }                }            });            arr.push(init_val);        }    }function contains(arr, obj) {    var i = arr.length;    while (i--) {        if (arr[i] === obj) {            return true;        }    }    return false;}</script></body></html>